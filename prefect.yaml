# Welcome to your prefect.yaml file! You can use this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: am_social_media_analytics
prefect-version: 3.1.9

# build section allows you to manage and build docker images
build: null

# push section allows you to manage if and how this project is uploaded to remote locations
push: null

pull:
- prefect.deployments.steps.set_working_directory:
    directory: /home/shola/am_social_media_analytics/

# pull section allows you to provide instructions for cloning this project in remote locations
# pull:
# - prefect.deployments.steps.git_clone:
#     repository: https://github.com/engnr-a/am_social_media_analytics
#     branch: main
#     access_token: '{{ prefect.blocks.secret.deployment-test-linked-selenium-flow-repo-token
#       }}'
# - prefect.deployments.steps.set_working_directory:
#     directory: "/home/shola/repositories/"

# the deployments section allows you to provide configuration for deploying flows
deployments:

- name: get_tweets_n1
  version: null
  tags: [tweets_by_dated_search_query]
  concurrency_limit: null
  description: Flow to scrape tweets by a search query that contained automatically generated dates based on previous scarpping
  entrypoint: src.am_social_media_analytics.data_collection.twitter.v0_scrape_full_page_flow:article_extraction_flow
  parameters: 
    url: "https://x.com/"
    data_folder: "data/keyphrase_search_results_raw/by_date"
    days_back: 10
    max_run_time: 2
    browser_port: 9222
  work_pool:
    name: mypc
    work_queue_name: null
    job_variables: {}
  enforce_parameter_schema: true
  schedules:
  - interval: 10800.0 
    anchor_date: '2025-01-01T00:00:00+00:00'  
    timezone: UTC
    active: false


- name: get_tweets_node1
  version: null
  tags: [tweets_by_search_query_n1]
  concurrency_limit: null
  description: Flow to scrape tweets by a search query that contained automatically generated dates based on previous scarpping
  entrypoint: src.am_social_media_analytics.data_collection.twitter.v0_scrape_full_page_flow:article_extraction_flow
  parameters: 
    url: "https://x.com/"
    data_folder: "data/keyphrase_search_results_raw/by_date/node1/2022"
    days_back: 10
    max_run_time: 2
    browser_port: 8222
    node_id: ""
  work_pool:
    name: mypc
    work_queue_name: null
    job_variables: {}
  enforce_parameter_schema: true
  schedules:
  - interval: 10800.0  # 
    anchor_date: '2025-01-01T00:00:00+00:00' 
    timezone: UTC
    active: false

- name: get_tweets_node2
  version: null
  tags: [tweets_by_search_query_n2]
  concurrency_limit: null
  description: Flow to scrape tweets by a search query that contained automatically generated dates based on previous scarpping
  entrypoint: src.am_social_media_analytics.data_collection.twitter.v0_scrape_full_page_flow:article_extraction_flow
  parameters: 
    url: "https://x.com/"
    data_folder: "data/keyphrase_search_results_raw/by_date/node2"
    days_back: 10
    max_run_time: 2
    browser_port: 8222
  work_pool:
    name: mypc
    work_queue_name: null
    job_variables: {}
  enforce_parameter_schema: true
  schedules:
  - interval: 10800.0  # 
    anchor_date: '2025-01-01T00:00:00+00:00' 
    timezone: UTC
    active: false
